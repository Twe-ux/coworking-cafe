# =============================================================================
# SOCKET SERVER - PRODUCTION (Northflank)
# Environment Variables for Northflank Deployment
# =============================================================================
#
# ⚠️ IMPORTANT: Ce fichier est un TEMPLATE pour Northflank.
# Ne PAS committer ce fichier avec des vraies valeurs.
# Utiliser ce fichier comme référence pour configurer les variables sur Northflank.
#
# =============================================================================

# -----------------------------------------------------------------------------
# MongoDB Connection
# -----------------------------------------------------------------------------

# URI de connexion MongoDB
# ⚠️ DOIT ÊTRE LA MÊME BASE QUE SITE ET ADMIN
# Format: mongodb+srv://user:password@cluster.mongodb.net/database-name
MONGODB_URI=

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------

# URLs autorisées pour CORS (séparées par virgules)
# Production: URLs des apps déployées
# Format: https://admin.votredomaine.com,https://site.votredomaine.com
ALLOWED_ORIGINS=

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------

# Port du serveur socket.io
# Northflank: Utiliser 3002 (déjà exposé dans le Dockerfile)
PORT=3002

# Environment
NODE_ENV=production

# -----------------------------------------------------------------------------
# JWT Secret (pour authentification socket.io)
# -----------------------------------------------------------------------------

# Secret pour vérifier les tokens JWT
# ⚠️ DOIT ÊTRE LE MÊME QUE NEXTAUTH_SECRET DE L'ADMIN
JWT_SECRET=

# =============================================================================
# INSTRUCTIONS POUR NORTHFLANK
# =============================================================================
#
# 1. Aller sur Northflank → Services → socket-server → Environment Variables
# 2. Ajouter chaque variable:
#
#    MONGODB_URI
#    - Valeur: mongodb+srv://... (même que site/admin)
#
#    ALLOWED_ORIGINS
#    - Valeur: https://admin.votredomaine.com,https://site.votredomaine.com
#
#    PORT
#    - Valeur: 3002
#
#    NODE_ENV
#    - Valeur: production
#
#    JWT_SECRET
#    - Valeur: (même secret que NEXTAUTH_SECRET de l'admin)
#
# 3. Sauvegarder et redéployer
#
# =============================================================================
# CONFIGURATION SERVICE NORTHFLANK
# =============================================================================
#
# Port: 3002
# Health Check Path: /api/health (ou /health)
# Health Check Protocol: HTTP
# Health Check Interval: 30s
# Health Check Timeout: 10s
# Health Check Unhealthy Threshold: 3
# Health Check Healthy Threshold: 2
#
# =============================================================================
# VALEURS À SYNCHRONISER AVEC SITE/ADMIN
# =============================================================================
#
# Ces variables DOIVENT avoir les MÊMES valeurs que site et admin:
# ------------------------------------------------------------------
# - MONGODB_URI           (même base de données)
# - JWT_SECRET            (même que NEXTAUTH_SECRET de l'admin)
#
# ALLOWED_ORIGINS doit contenir les URLs des apps déployées:
# ----------------------------------------------------------
# - URL de l'admin (Vercel)
# - URL du site (Vercel)
#
# =============================================================================
# SÉCURITÉ
# =============================================================================
#
# ⚠️ NE JAMAIS COMMITTER CE FICHIER AVEC DES VRAIES VALEURS
# ⚠️ MONGODB_URI doit pointer vers la même base que site et admin
# ⚠️ JWT_SECRET doit être identique à NEXTAUTH_SECRET de l'admin
# ⚠️ ALLOWED_ORIGINS doit contenir UNIQUEMENT les URLs de production (HTTPS)
# ⚠️ Vérifier que le port 3002 est bien exposé dans Northflank
#
# =============================================================================
