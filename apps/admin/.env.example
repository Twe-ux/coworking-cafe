# =============================================================================
# COWORKING CAFÉ - DASHBOARD ADMIN
# Environment Variables Template
# =============================================================================
#
# IMPORTANT: Ce fichier ne contient PAS de secrets réels.
# Copier ce fichier en .env.local et remplir avec les vraies valeurs.
#
# cp .env.example .env.local
#
# =============================================================================

# -----------------------------------------------------------------------------
# MongoDB Connection
# -----------------------------------------------------------------------------

# URI de connexion MongoDB (format: mongodb+srv://user:password@cluster/database)
# Production: utiliser un user dédié avec password fort
# ⚠️ REGÉNÉRER PASSWORD EN PRODUCTION
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/coworking_cafe

# Nom de la base de données (optionnel, par défaut: coworking_cafe)
MONGODB_DB=coworking_cafe

# -----------------------------------------------------------------------------
# NextAuth Configuration
# -----------------------------------------------------------------------------

# URL de base de l'application admin (avec protocole)
# Local: http://localhost:3001
# Production: https://admin.yourdomain.com
NEXTAUTH_URL=http://localhost:3001

# Secret pour signer les JWT NextAuth (générer avec: openssl rand -base64 32)
# ⚠️ REGÉNÉRER EN PRODUCTION
NEXTAUTH_SECRET=your-nextauth-secret-here-min-32-characters

# -----------------------------------------------------------------------------
# Resend (Email Service)
# -----------------------------------------------------------------------------

# Clé API Resend (https://resend.com/api-keys)
# ⚠️ REGÉNÉRER EN PRODUCTION
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Email expéditeur (doit être vérifié dans Resend)
# Production: utiliser un domaine professionnel (ex: noreply@yourdomain.com)
RESEND_FROM_EMAIL=onboarding@resend.dev

# -----------------------------------------------------------------------------
# Cloudinary (Image Upload)
# -----------------------------------------------------------------------------

# Nom du cloud Cloudinary
CLOUDINARY_CLOUD_NAME=your-cloud-name

# Clé API Cloudinary (https://cloudinary.com/console)
# ⚠️ REGÉNÉRER EN PRODUCTION
CLOUDINARY_API_KEY=000000000000000

# Secret API Cloudinary
# ⚠️ REGÉNÉRER EN PRODUCTION
CLOUDINARY_API_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxx

# Nom du cloud (côté client - public)
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your-cloud-name

# -----------------------------------------------------------------------------
# Sécurité - Interface Staff (Pointage)
# -----------------------------------------------------------------------------

# IP Whitelist pour accès interface staff (optionnel - laisser vide pour toutes IPs)
# Format: IP1,IP2,IP3
# Exemple: 192.168.1.10,82.65.123.45
STAFF_ALLOWED_IPS=

# IP whitelist pour route staff (séparées par virgules)
# Laisser vide pour autoriser toutes les IPs
ALLOWED_STAFF_IPS=

# Rate Limiting - Tentatives de PIN
# Nombre max de tentatives de PIN par minute
MAX_PIN_ATTEMPTS_PER_MINUTE=5

# Durée de blocage après dépassement (en minutes)
PIN_LOCKOUT_DURATION_MINUTES=15

# -----------------------------------------------------------------------------
# Push Notifications (VAPID Keys)
# -----------------------------------------------------------------------------

# Clé publique VAPID pour notifications push (côté client - public)
# Générer avec: npx web-push generate-vapid-keys
# ⚠️ REGÉNÉRER EN PRODUCTION
NEXT_PUBLIC_VAPID_PUBLIC_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Clé privée VAPID pour notifications push (côté serveur - privé)
# ⚠️ REGÉNÉRER EN PRODUCTION
VAPID_PRIVATE_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Email de contact VAPID (format: mailto:email@domain.com)
VAPID_SUBJECT=mailto:admin@yourdomain.com

# -----------------------------------------------------------------------------
# Stripe (Paiements)
# -----------------------------------------------------------------------------

# Clé secrète Stripe (https://dashboard.stripe.com/apikeys)
# Test mode: sk_test_...
# Live mode: sk_live_...
# ⚠️ UTILISER sk_live_... EN PRODUCTION UNIQUEMENT APRÈS TESTS
STRIPE_SECRET_KEY=your_stripe_secret_key_here

# Clé publique Stripe (safe côté client)
# Test mode: pk_test_...
# Live mode: pk_live_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here

# Secret de signature webhook Stripe (https://dashboard.stripe.com/webhooks)
# ⚠️ CRÉER UN NOUVEAU WEBHOOK EN PRODUCTION avec URL: https://admin.yourdomain.com/api/stripe/webhook
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Mode Stripe (false = test mode, true = live mode)
# ⚠️ PASSER À true EN PRODUCTION UNIQUEMENT APRÈS TESTS
STRIPE_LIVE_MODE=false

# -----------------------------------------------------------------------------
# Secrets Inter-Services
# -----------------------------------------------------------------------------

# Token secret pour les notifications inter-services (site -> admin)
# Générer avec: openssl rand -hex 32
# ⚠️ REGÉNÉRER EN PRODUCTION (doit être identique dans site et admin)
NOTIFICATIONS_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Secret pour la revalidation de cache (admin -> site)
# Générer avec: openssl rand -hex 32
# ⚠️ REGÉNÉRER EN PRODUCTION (doit être identique dans site et admin)
REVALIDATE_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -----------------------------------------------------------------------------
# Site Public URL (pour cache revalidation)
# -----------------------------------------------------------------------------

# URL du site public (avec protocole)
# Local: http://localhost:3000
# Production: https://site.yourdomain.com
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# =============================================================================
# NOTES IMPORTANTES
# =============================================================================
#
# 1. SÉCURITÉ:
#    - Ne JAMAIS committer .env.local dans Git
#    - Régénérer TOUTES les clés pour la production
#    - Utiliser des mots de passe forts (min 32 caractères)
#
# 2. STRIPE:
#    - Tester d'abord en mode TEST (sk_test_...)
#    - Passer en mode LIVE (sk_live_...) UNIQUEMENT après validation complète
#    - Créer un webhook dédié pour la production
#
# 3. MONGODB:
#    - Utiliser un user MongoDB dédié par environnement
#    - Restreindre les permissions (read/write sur la DB uniquement)
#    - Base de données unique: coworking_cafe (3 collections: users, employees, admins)
#
# 4. CLOUDINARY:
#    - Configurer les transformations d'images en production
#    - Limiter les uploads à des formats autorisés
#
# 5. RESEND:
#    - Vérifier le domaine d'envoi (SPF, DKIM)
#    - Utiliser un email professionnel (pas onboarding@resend.dev)
#
# 6. VAPID (Push Notifications):
#    - Générer nouvelles clés pour production: npx web-push generate-vapid-keys
#    - Les clés dev et prod doivent être différentes
#
# 7. SECRETS INTER-SERVICES:
#    - NOTIFICATIONS_SECRET et REVALIDATE_SECRET doivent être IDENTIQUES
#      dans apps/site/.env.local et apps/admin/.env.local
#
# 8. IP WHITELIST:
#    - STAFF_ALLOWED_IPS: IPs autorisées pour interface pointage staff
#    - ALLOWED_STAFF_IPS: IPs autorisées pour route staff
#    - Laisser vide en dev, configurer en production si besoin
#
# 9. RATE LIMITING:
#    - MAX_PIN_ATTEMPTS_PER_MINUTE: limite tentatives PIN
#    - PIN_LOCKOUT_DURATION_MINUTES: durée blocage après dépassement
#    - Adapter selon besoins sécurité
#
# 10. URLS:
#     - NEXTAUTH_URL: URL de l'admin (https://admin.yourdomain.com)
#     - NEXT_PUBLIC_SITE_URL: URL du site public (https://site.yourdomain.com)
#
# =============================================================================
