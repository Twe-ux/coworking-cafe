{
  "name": "coworking-admin",
  "type": "service",
  "runtime": {
    "type": "nextjs",
    "version": "14"
  },
  "build": {
    "context": ".",
    "dockerfile": null,
    "buildCommand": "pnpm install --frozen-lockfile && pnpm --filter @coworking-cafe/database build && pnpm --filter @coworking-cafe/email build && pnpm --filter @coworking-cafe/shared build && pnpm --filter @coworking-cafe/admin-shared build && pnpm --filter @coworking-cafe/admin build",
    "startCommand": "pnpm --filter @coworking-cafe/admin start"
  },
  "port": 3001,
  "resources": {
    "cpu": 0.25,
    "memory": 512
  },
  "replicas": 1,
  "healthCheck": {
    "path": "/api/health",
    "interval": 30,
    "timeout": 10
  },
  "environmentVariables": {
    "NODE_ENV": "production",

    "NEXT_PUBLIC_SOCKET_URL": "${SOCKET_URL}",
    "NEXT_PUBLIC_SITE_URL": "${SITE_URL}",

    "NEXTAUTH_URL": "${ADMIN_URL}",
    "NEXTAUTH_SECRET": "${NEXTAUTH_SECRET_ADMIN}",

    "MONGODB_URI": "${MONGODB_URI}",
    "MONGODB_DB": "coworking-admin",

    "SMTP_PROVIDER": "${SMTP_PROVIDER}",
    "SMTP_USER": "${SMTP_USER}",
    "SMTP_PASSWORD": "${SMTP_PASSWORD}",
    "SMTP_FROM_NAME": "${SMTP_FROM_NAME}",
    "SMTP_FROM_EMAIL": "${SMTP_FROM_EMAIL}",

    "CLOUDINARY_CLOUD_NAME": "${CLOUDINARY_CLOUD_NAME}",
    "CLOUDINARY_API_KEY": "${CLOUDINARY_API_KEY}",
    "CLOUDINARY_API_SECRET": "${CLOUDINARY_API_SECRET}",
    "NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME": "${CLOUDINARY_CLOUD_NAME}",

    "STAFF_ALLOWED_IPS": "${STAFF_ALLOWED_IPS}",
    "ALLOWED_STAFF_IPS": "${ALLOWED_STAFF_IPS}",
    "MAX_PIN_ATTEMPTS_PER_MINUTE": "5",
    "PIN_LOCKOUT_DURATION_MINUTES": "15",

    "NEXT_PUBLIC_VAPID_PUBLIC_KEY": "${VAPID_PUBLIC_KEY}",
    "VAPID_PRIVATE_KEY": "${VAPID_PRIVATE_KEY}",
    "VAPID_SUBJECT": "${VAPID_SUBJECT}",

    "STRIPE_SECRET_KEY": "${STRIPE_SECRET_KEY}",
    "NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY": "${STRIPE_PUBLISHABLE_KEY}",
    "STRIPE_WEBHOOK_SECRET": "${STRIPE_WEBHOOK_SECRET_ADMIN}",
    "STRIPE_LIVE_MODE": "${STRIPE_LIVE_MODE}",

    "NOTIFICATIONS_SECRET": "${NOTIFICATIONS_SECRET}",
    "REVALIDATE_SECRET": "${REVALIDATE_SECRET}",

    "JWT_SECRET": "${JWT_SECRET}"
  }
}
