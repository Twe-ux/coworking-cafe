{
  "name": "coworking-site",
  "type": "service",
  "runtime": {
    "type": "nextjs",
    "version": "14"
  },
  "build": {
    "context": ".",
    "dockerfile": null,
    "buildCommand": "pnpm install --frozen-lockfile && pnpm --filter @coworking-cafe/database build && pnpm --filter @coworking-cafe/email build && pnpm --filter @coworking-cafe/shared build && pnpm --filter @coworking-cafe/site build",
    "startCommand": "pnpm --filter @coworking-cafe/site start"
  },
  "port": 3000,
  "resources": {
    "cpu": 0.5,
    "memory": 512
  },
  "replicas": 1,
  "healthCheck": {
    "path": "/api/health",
    "interval": 30,
    "timeout": 10
  },
  "environmentVariables": {
    "NODE_ENV": "production",

    "NEXT_PUBLIC_API_URL": "${SITE_URL}/api",
    "NEXT_PUBLIC_ADMIN_URL": "${ADMIN_URL}",
    "NEXT_PUBLIC_SOCKET_URL": "${SOCKET_URL}",

    "NEXTAUTH_URL": "${SITE_URL}",
    "NEXTAUTH_SECRET": "${NEXTAUTH_SECRET}",

    "MONGODB_URI": "${MONGODB_URI}",

    "SMTP_PROVIDER": "${SMTP_PROVIDER}",
    "SMTP_USER": "${SMTP_USER}",
    "SMTP_PASSWORD": "${SMTP_PASSWORD}",
    "SMTP_FROM_NAME": "${SMTP_FROM_NAME}",
    "SMTP_FROM_EMAIL": "${SMTP_FROM_EMAIL}",

    "CLOUDINARY_CLOUD_NAME": "${CLOUDINARY_CLOUD_NAME}",
    "CLOUDINARY_API_KEY": "${CLOUDINARY_API_KEY}",
    "CLOUDINARY_API_SECRET": "${CLOUDINARY_API_SECRET}",
    "NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME": "${CLOUDINARY_CLOUD_NAME}",

    "STRIPE_SECRET_KEY": "${STRIPE_SECRET_KEY}",
    "NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY": "${STRIPE_PUBLISHABLE_KEY}",
    "STRIPE_WEBHOOK_SECRET": "${STRIPE_WEBHOOK_SECRET_SITE}",
    "STRIPE_LIVE_MODE": "${STRIPE_LIVE_MODE}",

    "NOTIFICATIONS_SECRET": "${NOTIFICATIONS_SECRET}",
    "REVALIDATE_SECRET": "${REVALIDATE_SECRET}",

    "HIBOUTIK_API_URL": "${HIBOUTIK_API_URL}",
    "HIBOUTIK_API_KEY": "${HIBOUTIK_API_KEY}"
  }
}
